{% extends "base.html" %}

{% block content %}
<div class="d-flex justify-content-center py-3">
    <button class="btn btn-warning">{{ language["process"] }}</button>
</div>
<div class="container">
    <div class="row">
        <div class="col-12 col-md-6 col-lg-6">
            <div class="card my-card">
                <h3>{{ language["pre"] }}</h3>
                    <img src="{{ url_for('static', filename='image/preview_img_1.png') }}"">
                    <form action="/" method="POST" enctype="multipart/form-data">
                        <input type="file" 
                        class="filepond"
                        name="filepond"
                        accept="image/png, image/jpeg, image/gif"/>
                    </form>
                </div>
            <div class="card my-card">
                <h3>{{ language["post"] }}</h3>
                <img src="{{ url_for('static', filename='image/preview_img_2.png') }}">
                <form action="/" method="POST" enctype="multipart/form-data">
                    <input type="file" 
                    class="filepond"
                    name="filepond"
                    accept="image/png, image/jpeg, image/gif"/>
                </form>
            </div>
        </div>

        <div class="col-12 col-md-6 col-lg-6">
                <div class="card my-card supp">
                    <h3>{{ language["output"] }}</h3>
                    <img src="{{ url_for('static', filename='image/dmg_mask.png') }}">
                    <img src="{{ url_for('static', filename='image/bb_1.png') }}"/>
                    <img src="{{ url_for('static', filename='image/bb_2.png') }}"/>
                    <img src="{{ url_for('static', filename='image/bb_3.png') }}"/>
                    <img src="{{ url_for('static', filename='image/bb_4.png') }}"/>
                    <img src="{{ url_for('static', filename='image/bb_5.png') }}"/>         
                </div>
            <div class="card">
                <h3>{{ language["table"] }}</h3>
                <table class="table"> 
                    <thead>
                        <th>{{language["level"]}}</th>
                        <th>{{language["class"]}}</th>
                    </thead>
                    {% if table %}
                        {% for row in table %}
                            <tr>
                                <td style="background-color: {{ row.color }};">
                                    {{ language[row.id] }}
                                </td>
                                <td>{{ row.num }}</td>
                            </tr>    
                        {% endfor %}
                    {% else %}
                    <tr><td></td><td></td></tr>
                    {% endif %}
                </table>
                <div class="card d-flex align-items-center justify-content-center">
                    <h3>{{ language["settings"] }}</h3>
                    <button type="submit">{{ language['apply'] }}</button>
                    <form class="container" action="/" method="POST">
                        {% for row in table %}
                        <div class="row">
                            <label for="{{row.id}}">
                                {{language[row.id]}} {{language['saturation'] }} 
                                <output id="{{row.id}}-val" for="{{row.id}}">1</output>
                            </label>
                            <input type="range" id="{{row.id}}" min="0" max="1" step="0.1"
                                value="1" aria-labelledby="{{row.id}}-label {{row.id}}-val">                           
                        </div>
                        {% endfor %}
                        <script>
                            // Actualiza el valor del output cuando cambia el input range
                            document.querySelectorAll('input[type="range"]').forEach(range => {
                                const output = document.querySelector(`#${range.id}-val`);
                                output.textContent = range.value;
                                range.addEventListener('input', () => {
                                    output.textContent = range.value;
                                });
                            });
                        </script>
                    </form>
                </div>
            </div>

        </div>
    </div> 
</div>
{% endblock %}